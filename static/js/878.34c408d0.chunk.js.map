{"version":3,"file":"static/js/878.34c408d0.chunk.js","mappings":"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","sources":["projects/pine-pullover/BodyInstruction.tsx","../../truly-even/src/utils.ts"],"sourcesContent":["import { getTruelyEven } from \"@tanyoknits/truly-even\";\nimport { InstructionProps } from \"./Instruction\";\nimport { SectionInstruction, getInchAndCm } from \"@tanyoknits/shared\";\n\nexport default function BodyInstruction({\n  schema,\n  measurement,\n}: InstructionProps) {\n  const endSts = schema.total.body - schema.waistDec;\n  const decText = getTruelyEven(schema.total.body / 2, endSts / 2, {\n    avoidEnds: true,\n    sts: \"ssk-k2tog\",\n    count: 2,\n    hasDoubleNest: true,\n  });\n  const startRowID = 2 + schema.raglan.every2 * 2 + schema.raglan.every4 * 4;\n\n  return (\n    <>\n      <SectionInstruction\n        title=\"Body & sleeves split\"\n        rowType={`Rnd ${startRowID + 1} + CO`}\n        rows={[\n          {\n            text: `k till mA, rm mA, slip sts to scrap yarn or stitch holder till mB, rm mB, CO ${schema.underarm}, k incl chart B till mC, \n          slip sts in scrap yarn or stitch holder till mD, CO ${schema.underarm}, k till BOR`,\n            notes: `total ${schema.total.body} sts`,\n          },\n        ]}\n      />\n      <SectionInstruction\n        rowType=\"Rnd\"\n        startRowID={startRowID + 1}\n        rows={[{ text: \"k all incl chart B\" }]}\n        notes={`Rep the last row till appx. ${getInchAndCm(\n          measurement.hem + 0.25\n        )} shorter than the desired length.`}\n      />\n\n      <SectionInstruction\n        title=\"Waistline dec\"\n        rowType=\"Next rnd\"\n        rows={[\n          {\n            text: `{${decText.sts.join(\", \")}}, rep{-}`,\n            notes: `${schema.waistDec} sts dec'd, total ${endSts} sts`,\n          },\n          { text: \"change to a smaller needle, k all\" },\n        ]}\n      />\n      <SectionInstruction\n        title=\"Hem ribbing\"\n        rowType=\"Next rnd\"\n        rows={[\n          { text: `(k1, p1), rep (-) to end (${endSts / 2} times)` },\n          { text: \"as rnd 1\" },\n        ]}\n        notes={`Work in ribbing for ${getInchAndCm(\n          measurement.hem\n        )}. BO with Sewn-on BO is recommended.`}\n      />\n    </>\n  );\n}\n","import {\n  getDec2StsList,\n  getChangeStsList,\n  getStsListRepets,\n} from \"@tanyoknits/shared\";\n\nexport type IncStsType = \"m1-m1\" | \"m1r-m1l\" | \"m1l-m1r\";\nexport type DecStsType =\n  | \"k2tog-k2tog\"\n  | \"ssk-ssk\"\n  | \"k2tog-ssk\"\n  | \"ssk-k2tog\"\n  | \"cdd-cdd-k2tog\"\n  | \"k3tog-k3tog-k2tog\"\n  | \"sk2p-sk2p-ssk\"\n  | \"k3tog-sk2p-ssk\"\n  | \"sk2p-k3tog-k2tog\";\n\nexport interface OptionType {\n  avoidEnds: boolean;\n  sts: DecStsType | IncStsType;\n  count: number;\n  hasDoubleNest: boolean;\n}\n\n// Get truly even increase or decrease instruction\nexport function getTruelyEven(\n  startSts: number,\n  endSts: number,\n  option: OptionType\n): { sts: string[]; avoidEndAvailable: boolean; doubleNestAvailable: boolean } {\n  let avoidEndAvailable = true;\n  let doubleNestAvailable = false;\n\n  // Inc/Dec stitch point list\n  const stsPoints =\n    option.count === 3\n      ? getDec2StsList(startSts, endSts)\n      : getChangeStsList(startSts, endSts);\n  const { avoidEnds, sts, count, hasDoubleNest } = option;\n\n  // If users don't want to end with inc/dec at the end, start it early\n  const tailSts = Math.floor((stsPoints[0] - count) / 2);\n  if (tailSts === 0) {\n    avoidEndAvailable = false;\n  }\n  if (avoidEnds) {\n    stsPoints[0] -= tailSts;\n  }\n\n  // Generate text from all 'k' include increase or decreases stitches\n  const incDecStsList = stsPoints.map((stsCount, i) => {\n    const stsTypes = sts.split(\"-\");\n    return count === 3 &&\n      i === stsPoints.length - 1 &&\n      (endSts - startSts) % 2 !== 0 // orphan increase for 2 sts dec\n      ? `k${stsCount - 2}, ${stsTypes[2]}`\n      : `k${stsCount - count}, ${\n          // For increase, count is 0 since it's adding a new M stitch\n          i < stsPoints.length / 2 ? stsTypes[0] : stsTypes[1]\n        }`;\n  });\n  if (avoidEnds && tailSts > 0) {\n    incDecStsList.push(`k${tailSts}`);\n  }\n\n  // Repeated stitches are now presented with \"X times\"\n  const stsMultiplied: string[] = getStsListRepets(incDecStsList);\n\n  // Check multiple increase groups are repeated\n  // e.g., [(k2, m1), (k3, m1) x 3] x 4\n  let repeatCheckIdx = 0;\n\n  const nested = stsMultiplied.reduce((labels: string[], sts, idx) => {\n    // Skip sts that's already applied to the previous repeats\n    if (idx < repeatCheckIdx) {\n      return labels;\n    }\n    // Recursive: if repeats aren't found, increase the number of repeated sts\n    // start with two (e.g., (k2, m1), (k3, m1) x 3)\n    function checkRepeats(count: number): string[][] {\n      const repeats = [stsMultiplied.slice(idx, idx + count)];\n      for (let i = idx + count; i <= stsMultiplied.length - count; i += count) {\n        // check if the following repeats are the same\n        if (\n          JSON.stringify(repeats[0]) ===\n          JSON.stringify(stsMultiplied.slice(i, i + count))\n        ) {\n          repeats.push(repeats[0]);\n          doubleNestAvailable = true;\n        } else {\n          break;\n        }\n      }\n      if (repeats.length > 1 || count > stsMultiplied.length / 2) {\n        return repeats;\n      }\n      return checkRepeats(count + 1);\n    }\n\n    const repeats = checkRepeats(2);\n\n    if (repeats.length > 1) {\n      const labelRepeats = repeats[0];\n      labels.push(`[${labelRepeats.join(\", \")}] x ${repeats.length}`);\n      // Skip all repeated ones\n      repeatCheckIdx += repeats.flat().length;\n    } else {\n      labels.push(sts);\n      // Go to the next repeat\n      repeatCheckIdx++;\n    }\n    return labels;\n  }, []);\n\n  return {\n    sts: hasDoubleNest ? nested : stsMultiplied,\n    avoidEndAvailable,\n    doubleNestAvailable,\n  };\n}\n"],"names":["BodyInstruction","schema","measurement","endSts","total","body","waistDec","decText","getTruelyEven","avoidEnds","sts","count","hasDoubleNest","startRowID","raglan","every2","every4","title","rowType","rows","text","underarm","notes","getInchAndCm","hem","join","startSts","option","avoidEndAvailable","doubleNestAvailable","stsPoints","getDec2StsList","getChangeStsList","tailSts","Math","floor","incDecStsList","map","stsCount","i","stsTypes","split","length","push","stsMultiplied","getStsListRepets","repeatCheckIdx","nested","reduce","labels","idx","repeats","checkRepeats","slice","JSON","stringify","labelRepeats","flat"],"sourceRoot":""}